'use strict';

const Setting = new function() {
    this.initialize = function() {
        this.context = $("#container").data("context");
        $(".btnSaveProfile").on("click", function(e) {
            e.preventDefault();
            let callBack = function(response) {
                Message.success("Profile updated successfully!");
                setTimeout(function(){window.location.reload();},1000);
            };
            AjaxUtil.PUT({url: Setting.context+"/api/user/update",
            data : {id: $(this).data("id"), gender: $("#userGender").val(), dateOfBirth: $("#userDateOfBirth").val(), mobileNo: $("#userMobileNo").val()},
            callBack: callBack});
        });
        $(".btnChangePassword").on("click", function(e) {
            e.preventDefault();
             let callBackConfirm = function() {
                window.open(Setting.context+"/reset/password", '_blank');
                let callBack = function(response) {};
                AjaxUtil.GET({url: Setting.context+"/logout", callBack: callBack});
                setTimeout(function(){window.location.reload();},200);
             };
             Message.confirm("Yes, Proceed to Reset Password", "For your security, you will be logged out and redirected to the password reset page.", callBackConfirm);
        });
    };
};
Setting.initialize();